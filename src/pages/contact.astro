---
import BaseLayout from '../layouts/BaseLayout.astro';
---
<BaseLayout title="Angus Quigley | Contact" description="get in touch">
  <section class="py-16 fade-in">
    <h1 class="text-5xl font-display font-light mb-12 relative">
      contact
    </h1>
    
    <div class="max-w-lg">
      <p class="text-lg leading-relaxed fade-in-up mb-12" style="animation-delay: 0.4s;">
        I'm always interested in discussing new opportunities, collaborations, or just having a conversation about engineering, technology, and innovation.
      </p>
      
      <div class="fade-in-up" style="animation-delay: 0.8s;">
        <form id="contact-form" action="https://api.web3forms.com/submit" method="POST" class="space-y-6">
          <input type="hidden" name="access_key" value="094a1652-5fe1-4e05-86fe-19ca2523e18d">
          <div>
            <label for="name" class="block text-sm font-medium text-gray-700 mb-2">Name</label>
            <input type="text" name="name" id="name" required class="w-full px-4 py-3 border border-gray-300 focus:ring-2 focus:ring-gray-900 focus:border-transparent">
          </div>
          <div>
            <label for="email" class="block text-sm font-medium text-gray-700 mb-2">Email</label>
            <input type="email" name="email" id="email" required class="w-full px-4 py-3 border border-gray-300 focus:ring-2 focus:ring-gray-900 focus:border-transparent">
          </div>
          <div>
            <label for="message" class="block text-sm font-medium text-gray-700 mb-2">Message</label>
            <textarea name="message" id="message" rows="6" required class="w-full px-4 py-3 border border-gray-300 focus:ring-2 focus:ring-gray-900 focus:border-transparent"></textarea>
          </div>
          <button id="submit-button" type="submit" class="bg-gray-900 text-white py-3 px-6 hover:bg-gray-700 transition-colors font-medium">
            Send Message
          </button>
        </form>
        <div id="form-result" class="mt-6 font-medium"></div>
      </div>
    </div>
  </section>

  <script>
    const form = document.getElementById('contact-form') as HTMLFormElement;
    const submitButton = document.getElementById('submit-button') as HTMLButtonElement;
    const resultDiv = document.getElementById('form-result') as HTMLDivElement;

    if (form && submitButton && resultDiv) {
      form.addEventListener('submit', async (e) => {
        e.preventDefault();
        
        submitButton.textContent = 'Sending...';
        submitButton.disabled = true;
        
        const formData = new FormData(form);
        
        try {
          const response = await fetch('https://api.web3forms.com/submit', {
            method: 'POST',
            body: formData
          });
          
          const data = await response.json();
          
          if (data.success) {
            resultDiv.textContent = 'Message sent successfully!';
            resultDiv.className = 'mt-6 font-medium text-green-600';
            form.reset();
          } else {
            throw new Error('Form submission failed');
          }
        } catch (error) {
          resultDiv.textContent = 'Error sending message. Please try again.';
          resultDiv.className = 'mt-6 font-medium text-red-600';
        } finally {
          submitButton.textContent = 'Send Message';
          submitButton.disabled = false;
        }
      });
    }
  </script>
</BaseLayout>
