---
import BaseLayout from '../layouts/BaseLayout.astro';
---
<BaseLayout title="Angus Quigley | Contact" description="get in touch">
  <section class="py-16 fade-in">
    <h1 class="text-5xl font-display font-light mb-12 relative">
      contact
    </h1>
    
    <div class="max-w-2xl space-y-12">
      <p class="text-lg leading-relaxed fade-in-up" style="animation-delay: 0.4s;">
        interested in working together or just want to say hello? 
        drop me a line and i'll get back to you soon.
      </p>
      
      <form id="contact-form" action="https://api.web3forms.com/submit" method="POST" class="space-y-8 fade-in-up" style="animation-delay: 0.8s;">
        <input type="hidden" name="access_key" value="094a1652-5fe1-4e05-86fe-19ca2523e18d">
        
        <div>
          <label for="name" class="block text-sm font-medium mb-2">name</label>
          <input 
            type="text" 
            id="name" 
            name="name" 
            required
            class="w-full px-0 py-3 border-0 border-b border-gray-300 focus:border-gray-900 focus:ring-0 bg-transparent text-gray-900 placeholder-gray-500"
            placeholder="your name"
          />
        </div>
        
        <div>
          <label for="email" class="block text-sm font-medium mb-2">email</label>
          <input 
            type="email" 
            id="email" 
            name="email" 
            required
            class="w-full px-0 py-3 border-0 border-b border-gray-300 focus:border-gray-900 focus:ring-0 bg-transparent text-gray-900 placeholder-gray-500"
            placeholder="your@email.com"
          />
        </div>
        
        <div>
          <label for="message" class="block text-sm font-medium mb-2">message</label>
          <textarea 
            id="message" 
            name="message" 
            rows="5"
            required
            class="w-full px-0 py-3 border-0 border-b border-gray-300 focus:border-gray-900 focus:ring-0 bg-transparent text-gray-900 placeholder-gray-500 resize-none"
            placeholder="message body"
          ></textarea>
        </div>
        
        <button 
          id="submit-button"
          type="submit" 
          class="inline-block bg-gray-900 text-white px-8 py-3 font-display text-sm lowercase tracking-wide hover:bg-gray-700 transition-colors duration-300 border-0 disabled:opacity-50 disabled:cursor-not-allowed"
        >
          send message
        </button>
        
        <div id="form-result" class="text-sm font-medium"></div>
      </form>
    </div>
  </section>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const form = document.getElementById('contact-form') as HTMLFormElement;
      const submitButton = document.getElementById('submit-button') as HTMLButtonElement;
      const formResult = document.getElementById('form-result') as HTMLDivElement;

      if (!form || !submitButton || !formResult) {
        console.error('Contact form elements not found');
        return;
      }

      form.addEventListener('submit', async function(e) {
        e.preventDefault();
        
        // Disable button and show loading state
        submitButton.disabled = true;
        submitButton.textContent = 'sending...';
        formResult.textContent = '';
        formResult.className = 'text-sm font-medium';

        try {
          const formData = new FormData(form);
          const response = await fetch('https://api.web3forms.com/submit', {
            method: 'POST',
            body: formData
          });

          const data = await response.json();

          if (data.success) {
            formResult.textContent = 'message sent successfully! i\'ll get back to you soon.';
            formResult.className = 'text-sm font-medium text-green-600';
            form.reset();
          } else {
            throw new Error(data.message || 'Something went wrong');
          }
        } catch (error) {
          formResult.textContent = 'failed to send message. please try again or email me directly.';
          formResult.className = 'text-sm font-medium text-red-600';
          console.error('Form submission error:', error);
        } finally {
          // Re-enable button
          submitButton.disabled = false;
          submitButton.textContent = 'send message';
        }
      });
    });
  </script>
</BaseLayout>
